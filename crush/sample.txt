
# devices
device 1 osd001
device 2 osd002
device 3 osd003
device 4 osd004 overload 0      # 0.0 -> normal, 1.0 -> failed
device 5 osd005 overload .1

# hierarchy
buckettype 2 cab
buckettype 3 row
buckettype 10 pool

cab cab-d2 {
       id -1         # optional
       alg straw     # required
       item osd001
       item osd002 weight 600 pos 1
       item osd003 weight 600 pos 2
       item osd004 weight 600 pos 3
       item osd005 pos 4 weight 600
}

# rules
rule normal {
     # these are required.
     pool 0
     type replicated 
     min_size 1
     max_size 4
     # need 1 or more of these.
     step take root
     step choose_indep 0 osd
     step emit
}
