# begin crush map

# devices
device 0 device0 offload 1.000
device 1 device1 offload 1.000
device 2 device2 offload 1.000
device 3 device3 offload 1.000
device 4 device4 offload 1.000
device 5 device5 offload 1.000
device 6 device6 offload 1.000
device 7 device7 offload 1.000
device 8 device8 offload 1.000
device 9 device9 offload 1.000
device 10 device10 offload 1.000
device 11 device11 offload 1.000
device 12 device12 offload 1.000
device 13 device13 offload 1.000
device 14 device14 offload 1.000
device 15 device15 offload 1.000

# types
type 0 device
type 1 domain
type 2 pool

# buckets
domain dom0 {
	id -1		# do not change unnecessarily
	alg uniform	# do not change bucket size (4) unnecessarily
	item device1 weight 1.000 pos 0
	item device2 weight 1.000 pos 1
	item device3 weight 1.000 pos 2
}
domain dom1 {
	id -2		# do not change unnecessarily
	alg uniform	# do not change bucket size (4) unnecessarily
	item device5 weight 1.000 pos 0
	item device6 weight 1.000 pos 1
	item device7 weight 1.000 pos 2
}
domain dom2 {
	id -3		# do not change unnecessarily
	alg uniform	# do not change bucket size (4) unnecessarily
	item device9 weight 1.000 pos 0
	item device10 weight 1.000 pos 1
	item device11 weight 1.000 pos 2
}
domain dom3 {
	id -4		# do not change unnecessarily
	alg uniform	# do not change bucket size (4) unnecessarily
	item device13 weight 1.000 pos 0
	item device14 weight 1.000 pos 1
	item device15 weight 1.000 pos 2
}
pool root {
	id -5		# do not change unnecessarily
	alg list	# add new items at the end; do not change order unnecessarily
	item dom3 weight 4.000
	item dom2 weight 4.000
	item dom1 weight 4.000
	item dom0 weight 4.000
}

pool metaroot {
	id -6
	alg list
	item device0 weight 1.000 pos 0
	item device4 weight 1.000 pos 1
	item device8 weight 1.000 pos 2
	item device12 weight 1.000 pos 3
}


# rules
rule metadata {
	pool 0
	type replicated
	min_size 2
	max_size 2
	step take metaroot
	step choose firstn 0 type device
	step emit
}
rule data {
	pool 1
	type replicated
	min_size 2
	max_size 2
	step take root
	step choose firstn 0 type domain
	step choose firstn 1 type device
	step emit
}
rule casdata {
	pool 2
	type replicated
	min_size 2
	max_size 2
	step take root
	step choose firstn 0 type domain
	step choose firstn 1 type device
	step emit
}

# end crush map
